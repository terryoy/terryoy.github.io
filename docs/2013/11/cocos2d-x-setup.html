<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="Hello, World!" />
    <meta name="application-name" content="Hello, World!" />
    <title>Cocos2d-x-2.2.0 Setup Guide (for Android and iOS) - Hello, World!</title>
    <meta name="keywords" content="linux,game,mobile" />
    <meta name="description" content="" />
    
    <link rel="alternate" type="application/rss+xml" href="/feed.xml" title="Hello, World!" />
    <link rel="stylesheet" href="/static/css/styles.css?v=b6244" />
    <link rel="stylesheet" href="/static/css/pygment_trac.css?v=a6c15" />
    <!-- Google AdSense -->
    <script data-ad-client="ca-pub-6012718593977391" async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script async custom-element="amp-ad" src="//cdn.ampproject.org/v0/amp-ad-0.1.js"></script>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
<div id="wrapper">
<header id="header" class="clear">
    <section class="header-title">
      <h1>Hello, World!</h1>
      <p>I'm <i>terryoy</i></p>
    </section>

    <section class="header-friendly-links">
      
        <p class="view"><a href="https://github.com/terryoy">My GitHub Profile</a></p>
      
        <p class="view"><a href="http://terryoy.github.io/thoughts/">中文博客</a></p>
      

      
        <p class="view"><a class="feed" href="/feed.xml">RSS feed</a></p>
      
    </section>

</header><!-- #header -->
<nav id="nav" role="navigation">
    <a href="/">Home</a>
    <a href="/guides/">Guides</a>
    <a href="/tricks/">Tricks</a>
    <a href="/projects.html">*Projects</a>
    <a href="/about.html">About Me</a>
</nav>

<section class="main"><article id="main" class="hentry">
	<h1>Cocos2d-x-2.2.0 Setup Guide (for Android and iOS)</h1>
    <p class="sub_text">2013-11-27 by <i>terryoy</i>, in <a href="/guides/">guides</a>
    </p>

	<p>This guide describes the steps to setup a development environment for Cocos2d-x the cross-platform game development framework, on Linux and Mac OSX.</p>

<h2 id="toc_0">1. Download packages</h2>
<p>In this guide, we&#39;ll use cocos2d-x-2.x as example, and we&#39;ll setup for Android and iOS app development. So, the following packages will be needed:</p>

<table><thead>
<tr>
<th>Packages</th>
<th>Links</th>
<th>Remark</th>
</tr>
</thead><tbody>
<tr>
<td>Cocos2d-x:</td>
<td><a href="http://www.cocos2d-x.org/download">www.cocos2d-x.org/download</a></td>
<td>use latest of v2.x</td>
</tr>
<tr>
<td>ADT bundle:</td>
<td><a href="http://developer.android.com/sdk/index.html">developer.android.com/sdk/index.html</a></td>
<td>Android Development Tools</td>
</tr>
<tr>
<td>Android NDK:</td>
<td><a href="http://developer.android.com/tools/sdk/ndk/index.html">developer.android.com/tools/sdk/ndk/index.html</a></td>
<td>legacy-toolchains package is not neccessary</td>
</tr>
</tbody></table>
<p>Unzip the three packages to a folder. For example, after I extract the files, the paths looks like:</p>

<pre><code>~/develop/android/adt-bundle-linux-x86-20131030/eclipse
~/develop/android/adt-bundle-linux-x86-20131030/sdk
~/develop/android/adt-bundle-linux-x86-20131030/android-ndk-r9b
~/develop/cocos2dx/cocos2d-x-2.2.0/</code></pre>
<p>Next go to Eclipe(for Android) or Xcode(for iOS) for next step.</p>

<h2 id="toc_1">2. Android Setup</h2>

<h3 id="toc_2">Check device accessible</h3>
<p>You better make sure you can access your android tablet before building it on the device. The method to check is a &ldquo;adb devices&rdquo; command(don&#39;t forget to turn on the debug mode on the tablet first):</p>

<pre><code>$ cd $ANDROID_SDK_HOME/platform-tools
$ ./adb devices
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
List of devices attached 
????????????    no permissions</code></pre>
<p>If you see the device listed without a valid name, and marked with &ldquo;no permissions&rdquo;, the reason is often that you started ADB Server not as root. Try to fix that is to restart the adb daemon in root access:</p>

<pre><code># be sure to close ADT first, because sometimes it make adb started in user even with sudo
$ sudo ./adb kill-server
$ sudo ./adb start-server
# check adb server running user
$ ps -ef | grep adb
root     15657     1  0 09:59 pts/0    00:00:00 adb -P 5037 fork-server server
# check device list
$ ./adb devices
List of devices attached 
20080411    device
# try if you can connect to the device and run with shell
$ ./adb shell</code></pre>
<p>If all successful, open Eclipse IDE and we&#39;ll build the project.</p>

<h3 id="toc_3">Importing The Library and The Projects</h3>
<p>We&#39;ll import twice: one for the <strong>cocos2d-x library</strong>, one for the <strong>sample projects</strong>.</p>
<p><img src="/images/2013/cocos_import.png" alt="alt" title="Import existing projects"/></p>
<p>The search path for cocos2d-x library is &ldquo;<strong><em>$COCOS2DX_ROOT/cocos2dx</em></strong>&rdquo;</p>
<p><img src="/images/2013/cocos_import_lib.png" alt="alt" title="Import cocos2d-x lib"/></p>
<p>The search path for sample projects is &ldquo;<strong><em>$COCOS2DX_ROOT/samples/Cpp/</em></strong>&rdquo;(because we&#39;re going to use C++ for cocos2d-x development).</p>
<p><img src="/images/2013/cocos_import_tests.png" alt="alt" title="Import sample projects"/></p>
<p>After that we&#39;ll see the projects in the workspace:</p>
<p><img src="/images/2013/cocos_import_success.png" alt="alt" title="Imported projects"/></p>

<h3 id="toc_4">Setting Environment Variables</h3>
<p>If you try building the project &ldquo;TestCpp&rdquo; now, you will probably find the below error:</p>
<p><img src="/images/2013/cocos_build_ndk_error.png" alt="alt" title="Compile error"/></p>
<p>It&#39;s because we have to set the environment variables for the compiler. It needs &ldquo;<strong>COCOS2DX_ROOT</strong>&rdquo; and &ldquo;<strong>NDK_ROOT</strong>&rdquo; to build the project. So open &ldquo;Window -&gt; Preferences -&gt; C/C++ -&gt; Build -&gt; Environment&rdquo; in the Eclipse IDE, and set the variables similar to below:</p>
<p><img src="/images/2013/cocos_set_env_vars.png" alt="alt" title="Path variables"/></p>
<p>After that, select the &ldquo;TestCpp&rdquo; and build again, you should be able to see the build succesful messages:</p>
<p><img src="/images/2013/cocos_build_sucessful.png" alt="alt" title="NDK build successful"/></p>

<h3 id="toc_5">Running on Tablet</h3>
<p>Next try running it on the tablet. Click &ldquo;Run&rdquo; and (after the build) you will get the &ldquo;Android Device Chooser&rdquo; below:</p>
<p><img src="/images/2013/cocos_avd.png" alt="alt" title="Android Device Chooser"/></p>
<p>Here you could choose the plugged in tablet which you have configured in the previous steps to run the program. Or you could choose to create a new emulator to run it on your computer. If you have problem seeing the device in the list, go back to the &ldquo;Check device accessible&rdquo; step to check the device again. </p>
<p>If you find running the emulators very slow, check out the <a href="http://stackoverflow.com/questions/16732021/why-emulator-is-very-slow-in-android-studio">post here</a> for suggestions.</p>

<h2 id="toc_6">3. Xcode Setup</h2>
<p>(Since I had lost the log while setting up this, I won&#39;t update this part until I got a chance to try it again.)</p>
<p>Setting up in Xcode is pretty simple. Just extract the cocos2d-x-2.x.x.zip, and open the project files at <code>./samples/Cpp/HelloCpp/proj.ios/</code> with Xcode. Next, you should check the compiling errors and solve it one by one.</p>
<p>If the &ldquo;cocos2dx.xcodeproj&rdquo; sub-project displays as missing, you could open the . and select the &ldquo;Location&rdquo; for it, which should be pointed to <code>./cocos2dx/proj.ios/cocos2dx/</code></p>
<p>There are usually two build scheme in the Xcode project. One is for building the cocos2d-x framework, the other is the project it self. So before you build the project, you should build the cocos2d-x framework first.</p>

<h2 id="toc_7">4. Start a New Cross-platform Project</h2>
<p>There is one script for creating a new cocos2d-x project under the path <code>./tools/project-creator/</code></p>
<div class="highlight"><pre><span></span>$ ./create_project.py
Usage: create_project.py -project PROJECT_NAME -package PACKAGE_NAME -language PROGRAMING_LANGUAGE
Options:
  -project   PROJECT_NAME          Project name, <span class="k">for</span> example: MyGame
  -package   PACKAGE_NAME          Package name, <span class="k">for</span> example: com.MyCompany.MyAwesomeGame
  -language  PROGRAMING_LANGUAGE   Major programing lanauge you want to used, should be <span class="o">[</span>cpp <span class="p">|</span> lua <span class="p">|</span> javascript<span class="o">]</span>

Sample <span class="m">1</span>: ./create_project.py -project MyGame -package com.MyCompany.AwesomeGame
Sample <span class="m">2</span>: ./create_project.py -project MyGame -package com.MyCompany.AwesomeGame -language javascript
</pre></div>
<p>The new project will be created under <code>./projects/</code> under the root folder of cocos2d-x, and it is not easy if you want to put it outside this folder(for example, another git repos), because the project&#39;s dependencies uses relative paths to the cocos2d-x&#39;s components. It might differs in Xcode or in Eclipse, etc. So here we don&#39;t discuss further.</p>



	<p/>
	<hr/>

    <div class="sub_text">
        <span>Tags:
            <a href="/tag/linux/">linux</a>,&nbsp;<a href="/tag/game/">game</a>,&nbsp;<a href="/tag/mobile/">mobile</a>
		</span>

        
    </div>
    

	<p/>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle"
           style="display:block; text-align:center;"
           data-ad-layout="in-article"
           data-ad-format="fluid"
           data-ad-client="ca-pub-6012718593977391"
           data-ad-slot="1086396907"></ins>
      <script>
           (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'terryoy';
        var disqus_title = 'Cocos2d-x-2.2.0 Setup Guide (for Android and iOS)';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    
</article></section>

<footer id="footer">
  <amp-ad width="100vw" height="320"
       type="adsense"
       data-ad-client="ca-pub-6012718593977391"
       data-ad-slot="1828084194"
       data-auto-format="rspv"
       data-full-width="">
    <div overflow=""></div>
  </amp-ad>
    <p><small>Hosted on GitHub Pages &mdash;<br/> Theme adopted from <a href="https://github.com/orderedlist">orderedlist</a></small></p>
</footer><!-- #footer -->
</div><!-- #wrapper -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50656512-1', 'terryoy.github.io');
ga('send', 'pageview');
</script> <!-- google analytics -->

</body>
</html>